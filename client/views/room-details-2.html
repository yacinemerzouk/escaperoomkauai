<template name="room2">

    <!-- HERO BANNER -->
    <div class="hero hero-home-bg" style="background-image: url({{image}});">
        <div class="overlay">
            <div class="content">
                <h1 style="margin: 0 0 20px">{{room.title}}</h1>
                <p style="width: 100%; max-width: 600px; margin: 0 0 20px;">{{room.description}}</p>
                <p style="width: 100%; max-width: 100%; margin: 0;">
                <div class="specs">
                    <i class="fa fa-users" aria-hidden="true" style=""></i>
                    <span class="spec-value" style="">{{room.minPlayers}} - {{room.maxPlayers}}</span><br>
                    <span class="spec-key" style="">Players</span>
                </div>
                <div class="specs">
                    <i class="fa fa-clock-o" aria-hidden="true" style=""></i>
                    <span class="spec-value" style="">{{room.duration}}</span><br>
                    <span class="spec-key" style="">Minutes</span>
                </div>
                <div class="specs" style="width: 160px">
                    <i class="fa fa-trophy" aria-hidden="true"></i>
                    <span class="spec-value" style="">{{room.successRate}}%</span><br>
                    <span class="spec-key" style="">Success Rate</span>
                </div>
                <div class="specs">
                    <i class="fa fa-credit-card" aria-hidden="true"></i>
                    <span class="spec-value" style="">${{kamaainaPerPlayer room}} - ${{room.pricePerPlayer}}</span><br>
                    <span class="spec-key" style="">Per Player</span>
                </div>
                </p>
            </div>
        </div>
    </div>



    <!-- CONTENT -->
    <div class="container">

        <div class="row">

            <div class="col-xs-12 col-md-8">

                <!-- TITLE MAY CHANGE DEPENDING ON GAME AVAILABILITY -->
                <h3 id="booknow" class="subheading">
                    {{#if room.available}}
                        Book Now
                    {{else}}
                        {{#if room.retired}}
                            Retired
                        {{else}}
                            Coming Soon
                        {{/if}}
                    {{/if}}
                </h3>

                <!-- BOOKING FORM -->
                <form class="room-booking-form" hook="reservation-form">

                    <div class="row" id="form-fields-row">

                        <!-- PLAYER PRICING AND NB OF PLAYERS -->
                        <div class="col-xs-12">
                            <div class="form-group">
                                <label for="nbPlayers">Select number of players</label>
                                <p style="font-size: 14px; font-weight: bold;">{{toCurrency room.pricePerPlayer}} per player<br><span class="discount">{{toCurrency room.kamaainaDiscountPerPlayer}} off for each Hawaii resident</span></p>

                                <select class="form-control" hook="update-players" id="nbPlayers" name="nbPlayers" style="width: 100%; max-width: 100%;">
                                    <option value="0"> NUMBER OF PLAYERS </option>
                                    {{#each nbPlayersOptions room=room game=game}}
                                        <option value="{{this}}" {{selected this userSelections.nbPlayers}}>{{this}} players </option>
                                    {{/each}}
                                </select>
                            </div>
                        </div>


                        <!-- DATE SELECTION -->
                        <div class="col-xs-12 col-md-6 {{#unless room.available}}hidden{{/unless}}">

                            <label for="Date" style="margin-bottom: 10px;">Select date <span class="label label-success pull-right" style="font-size: 14px; position: relative; top: 1px; background-color: #007300">{{humanReadableDate game.date}}</span></label>

                            <!-- DATEPICKER; HIDDEN IF DATE & TIME ALREADY SELECTED BY USER -->
                            <div id="datepicker" class="datepicker-full-width {{#if game.time}}hidden{{/if}}"></div>

                        </div>

                        <!-- TIME SELECTION -->
                        <div class="col-xs-12 col-md-6">

                            <label>
                                Select time
                                {{#if game.time}}
                                    <span class="label label-success pull-right" style="font-size: 14px; position: relative; top: 1px; background-color: #007300">
                                        {{game.time}}
                                    </span>
                                {{/if}}
                            </label>

                            {{#unless game.time}}
                                <div id="times">
                                    {{#if calendarDataReady}}
                                        {{#if games}}
                                            {{#each games}}
                                                {{#if canBeBooked this}}
                                                    <a href="#" hook="set-time" hook-data="{{time}}" class="label label-time label-time-grey">{{time}} &nbsp;&bull;&nbsp; {{spotsLeftInGame this}}  spots left</a>
                                                {{else}}
                                                    <span class="label label-time label-time-red">{{time}} &nbsp;&bull;&nbsp; Sold Out</span>
                                                {{/if}}
                                            {{/each}}
                                        {{else}}
                                            No games scheduled for this date.
                                        {{/if}}
                                    {{else}}
                                        <img src="/images/loading.gif">
                                    {{/if}}
                                </div>
                            {{/unless}}
                        </div>

                        {{#if game.time}}
                            <div class="col-xs-12">

                                <p style="text-align: center; margin-bottom: 25px;">
                                    <a href="#" hook="set-time" hook-data="" style="display: block; background-color: #ddd; padding: 8px 12px 12px; text-decoration: none">
                                        <span style="font-size: 12px; font-weight: normal; color: #666; font-weight: bold">{{humanReadableDate game.date}} @ {{game.time}}</span><br>
                                        <span style="font-size: 12px; font-weight: normal; color: #cc0000;  text-decoration: underline; ">Change Date &amp; Time Choice</span>
                                    </a>
                                </p>



                                <!-- FIRST NAME -->
                                <div class="form-group">
                                    <label for="firstName">First Name</label>
                                    <input type="text" hook="update-reservation" class="form-control" id="firstName" name="firstName" value="{{reservation.firstName}}">
                                </div>

                                <!-- LAST NAME -->
                                <div class="form-group">
                                    <label for="lastName">Last Name</label>
                                    <input type="text" hook="update-reservation" class="form-control" id="lastName" name="lastName" value="{{reservation.lastName}}">
                                </div>

                                <!-- EMAIL -->
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" hook="update-reservation" class="form-control" id="email" name="email" value="{{reservation.email}}">
                                </div>

                                <!-- PHONE -->
                                <div class="form-group">
                                    <label for="phone">Phone</label>
                                    <input type="text" hook="update-reservation" class="form-control" id="phone" name="phone" value="{{reservation.phone}}">
                                </div>



                                <!-- DISPLAY CLOSED ROOM OPTION IF APPROPRIATE -->
                                {{#if canBeClosed}}
                                    <div class="form-group">
                                        <label>Close Room</label>
                                        <p>Groups of 2-4 players can choose to pay a ${{room.priceToClose}} fee to keep players outside of their own party from reserving the same game and time slot. Groups of 5 or 6 players will never be joined by players outside of their own party.</p>

                                        <div class="checkbox">
                                            <label style="border-bottom: none">
                                                {{#if userSelections.closeRoom}}
                                                    <input hook="update-reservation" type="checkbox" id="closeRoom" name="closeRoom" checked> Yes, I want to pay a ${{room.priceToClose}} closed room fee.
                                                {{else}}
                                                    <input hook="update-reservation" type="checkbox" id="closeRoom" name="closeRoom"> Yes, I want to pay a ${{room.priceToClose}} closed room fee.
                                                {{/if}}
                                            </label>
                                        </div>
                                    </div>
                                {{/if}}

                                <!-- COUPON CODE -->
                                <div class="form-group">
                                    <label for="coupon">Coupon Code</label>
                                    <p>If you have a coupon code, enter it here. Coupon codes cannot be combined with the Kama'aina discount.</p>
                                    <input type="text" hook="update-coupon" class="form-control" id="coupon" name="coupon" value="{{reservation.coupon}}">
                                    {{#if reservation.coupon}}
                                        {{#if reservation.discount}}
                                            <span class="label label-success">Coupon applied</span>
                                        {{else}}
                                            <span class="label label-danger">Enter valid coupon code</span>
                                        {{/if}}
                                    {{/if}}
                                </div>

                                <!-- DISPLAY RESIDENT DISCOUNT OPTION IF NO COUPON CODE WAS USED. -->

                                <div class="form-group">
                                    <label for="nbKamaaina">Kama'aina Discount</label>
                                    <p>How many Hawai'i residents in your party? Hawai'i residents each get $5 off. HAWAII ID REQUIRED.</p>
                                    <select class="form-control" hook="update-reservation" id="nbKamaaina" name="nbKamaaina" style="width: 100%">
                                        <option value="0"> SELECT NUMBER OF HAWAII RESIDENTS </option>
                                        {{#each kamaainaPlayersOptions}}
                                            <option value="{{this}}" {{selected this userSelections.nbKamaaina}}>{{this}}</option>
                                        {{/each}}
                                    </select>
                                </div>

                                <!-- SOURCE TRACKING -->
                                <div class="form-group">
                                    <label for="source">How did you hear about us?</label>
                                    <input type="text" hook="update-reservation" class="form-control" id="source" name="source" value="{{reservation.source}}">
                                </div>

                            </div>


                            <!-- REVIEW ORDER -->


                                <label for="subtotal">Review Order</label>
                                <table class="table table-striped table-bordered table-responsive">
                                    <tbody>

                                    <!-- NB PLAYERS / TIME / DATE -->
                                    <tr>
                                        <th colspan="2" style="font-size: 1.4em">
                                            <span class="label label-success" style="position: relative; bottom: 3px; background-color: #007300">{{reservation.nbPlayers}} players</span>
                                            <span class="label label-success" style="position: relative; bottom: 3px; background-color: #007300">{{humanReadableDate game.date}}</span>
                                            <span class="label label-success" style="position: relative; bottom: 3px; background-color: #007300">{{game.time}}</span>
                                        </th>
                                    </tr>

                                    <!-- COST OF PLAYERS -->
                                    <tr>
                                        <td>{{reservation.nbPlayers}} players &nbsp;&times;&nbsp; {{toCurrency room.pricePerPlayer}}</td>
                                        <td class="currency">{{toCurrency reservation.costOfPlayers}}</td>
                                    </tr>

                                    <!-- COST OF CLOSED ROOM -->
                                    {{#if canBeClosed game}}
                                        {{#if reservation.closeRoom}}
                                            <tr>
                                                <td>Closed room</td>
                                                <td class="currency">{{toCurrency reservation.costOfCloseRoom}}</td>
                                            </tr>
                                        {{/if}}
                                    {{/if}}

                                    <!-- SUBTOTAL BEFORE DISCOUNTS AND TAXES -->
                                    <tr style="font-weight:bold;">
                                        <td>Subtotal</td>
                                        <td class="currency">{{toCurrency reservation.subtotal}}</td>
                                    </tr>

                                    <!-- DISCOUNT FROM KAMAAINA -->
                                    {{#if reservation.discountKamaaina}}
                                        <tr>
                                            <td class="discount">Kama'aina Discount &nbsp;&bull;&nbsp; {{reservation.nbKamaaina}} residents &nbsp;&times;&nbsp; &mdash; {{toCurrency room.kamaainaDiscountPerPlayer}}</td>
                                            <td class="currency discount">&mdash; {{toCurrency reservation.discountKamaaina}}</td>
                                        </tr>
                                    {{/if}}


                                    <!-- DISCOUNT FROM COUPON CODE -->
                                    {{#if reservation.discount}}
                                        <tr>
                                            {{#if reservation.couponData.type}}
                                                <td class="discount text-uppercase">Coupon "{{reservation.couponData.coupon}}" ${{reservation.couponData.discount}} OFF</td>
                                            {{else}}
                                                <td class="discount text-uppercase">Coupon "{{reservation.couponData.coupon}}" {{reservation.couponData.discount}}% OFF</td>
                                            {{/if}}
                                            <td class="currency discount">&mdash; {{toCurrency reservation.discount}}</td>
                                        </tr>
                                    {{/if}}
                                    <!-- TAXES -->
                                    <tr>
                                        <td>Taxes</td>
                                        <td class="currency">{{toCurrency reservation.taxes}}</td>
                                    </tr>

                                    <!-- TOTAL -->
                                    <tr style="font-size: 18px;">
                                        <th>TOTAL</th>
                                        <th class="currency">{{toCurrency reservation.total}}</th>
                                    </tr>

                                    </tbody>
                                </table>

                                <!-- CREDIT CARD FOR; IF TOTAL > 0 -->
                                {{#unless isFree}}
                                    <div class="row">

                                        <!-- CREDIT CARD NUMBER -->
                                        <div class="form-group col-xs-12 col-md-6">
                                            <label for="cc">Credit Card Number</label>
                                            <input type="text" hook="update-reservation" class="form-control" id="cc" name="cc" value="{{reservation.cc}}">
                                        </div>

                                        <!-- EXPIRATION -->
                                        <div class="form-group col-xs-8 col-md-4">

                                            <label for="ccExpMonth">Expiration</label>

                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <select hook="update-reservation" class="form-control col-xs-6" id="ccExpMonth" name="ccExpMonth">
                                                        <option value="">Month</option>
                                                        <option value="01" {{selected reservation.ccExpMonth '01'}}>01 - January</option>
                                                        <option value="02" {{selected reservation.ccExpMonth '02'}}>02 - February</option>
                                                        <option value="03" {{selected reservation.ccExpMonth '03'}}>03 - March</option>
                                                        <option value="04" {{selected reservation.ccExpMonth '04'}}>04 - April</option>
                                                        <option value="05" {{selected reservation.ccExpMonth '05'}}>05 - May</option>
                                                        <option value="06" {{selected reservation.ccExpMonth '06'}}>06 - June</option>
                                                        <option value="07" {{selected reservation.ccExpMonth '07'}}>07 - July</option>
                                                        <option value="08" {{selected reservation.ccExpMonth '08'}}>08 - August</option>
                                                        <option value="09" {{selected reservation.ccExpMonth '09'}}>09 - September</option>
                                                        <option value="10" {{selected reservation.ccExpMonth '10'}}>10 - October</option>
                                                        <option value="11" {{selected reservation.ccExpMonth '11'}}>11 - November</option>
                                                        <option value="12" {{selected reservation.ccExpMonth '12'}}>12 - December</option>
                                                    </select>
                                                </div>
                                                <div class="col-xs-6">
                                                    <select hook="update-reservation" class="form-control col-xs-6" id="ccExpYear" name="ccExpYear">
                                                        <option value="">Year</option>
                                                        {{#each years}}
                                                            <option value="{{this}}" {{selected userSelections.ccExpYear this}}>{{this}}</option>
                                                        {{/each}}
                                                    </select>
                                                </div>

                                            </div>

                                        </div>

                                        <!-- CREDIT CARD VERIFICATION NUMBER -->
                                        <div class="form-group col-xs-4 col-md-2">
                                            <label for="cvv">CVV <a href="#"  data-toggle="modal" data-target="#myModal" hook="show-cvv-explainer" class="label label-info pull-right" style="color: #FFF; position: relative; top: 2px; text-decoration: none">?</a></label>
                                            <input type="text" hook="update-reservation" class="form-control" id="cvv" name="cvv" value="{{reservation.cvv}}">
                                        </div>

                                        <!-- MODAL; EXPLAINER OF WHAT CVV IS -->
                                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                        <h4 class="modal-title" id="myModalLabel">CVV</h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <p>CVV is a credit card verification number. You can find it on your credit card:</p>
                                                        <img src="/images/cvv-explainer.png" style="width: 100%; max-width: 300px">
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-default button" data-dismiss="modal">Close</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                {{/unless}}

                                <!-- KACHING! -->
                                <input type="submit" hook="checkout" class="button btn-block button-available text-center" value="Complete Order">



                        {{/if}}


                    </div> <!-- #form-fields-row -->

                </form>

                <!-- SECURE PADLOCK AND CREDIT CARD LOGOS BELOW FORM -->
                <div class="text-center">
                    <img src="/images/secure2.jpeg" style="margin-top: 20px; width: 100%; max-width: 200px">
                </div>
            </div>

            <!-- TESTIMONIALS -->
            <div class="col-xs-12 col-md-4 hidden-xs hidden-sm" style="padding-top: 140px;">

                {{#with settings}}
                    <p class="testimonial" style="margin-left: 0; margin-right:0; max-width: none; padding: 0; margin-bottom: 20px;">
                        <span class="testimonial-quote" style="font-size: 16px; line-height: 24px;">
                            "{{firstTestimonial}}"
                            </span><br>
                        <span class="testimonial-author" style="font-size: 14px; line-height: 22px;">
                             &mdash; {{firstCite}}
                        </span>
                    </p>
                    <p class="testimonial" style=" margin-left: 0; margin-right:0; max-width: none;  padding: 0; margin-bottom: 20px;">
                        <span class="testimonial-quote" style="font-size: 16px; line-height: 24px;">
                            "{{secondTestimonial}}"
                            </span><br>
                        <span class="testimonial-author" style="font-size: 14px; line-height: 22px;">
                             &mdash; {{secondCite}}
                        </span>
                    </p>
                {{/with}}

                <p>
                    <img src="/images/tripadvisor.jpg" style="width:100px;">
                </p>
                <p>
                    <img src="/images/yelp.png" style="width:100px; padding: 5px;">
                </p>
            </div>
        </div>
    </div>


    <!-- UI OVERLAY WHEN PROCESSING PAYMENT -->
    <div class="processing-bg">
        <div class="processing">
            PROCESSING ORDER<br><img style="position: relative; bottom: 10px; left: 1px" src="/images/loading.gif">
        </div>
    </div>

</template>